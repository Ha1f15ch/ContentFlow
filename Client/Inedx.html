<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–ú–æ–∏ –∑–∞–¥–∞—á–∏</title>

    <!-- üîó –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Google Fonts: Roboto Slab & Open Sans -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;500;600&family=Roboto+Slab:wght@600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <!-- –ö–æ—Ä–Ω–µ–≤–æ–π —ç–ª–µ–º–µ–Ω—Ç Vue -->
    <div id="app">
      <h1>–ú–æ–∏ –∑–∞–¥–∞—á–∏</h1>

      <!-- –ö–ù–û–ü–ö–ê-–ë–ê–ù–ù–ï–† –î–õ–Ø –î–û–ë–ê–í–õ–ï–ù–ò–Ø –ó–ê–î–ê–ß–ò -->
      <div class="add-task-banner">
        <button @click="openNewTaskModal" class="add-task-button">
          ‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É
        </button>
      </div>

      <!-- –ö–Ω–æ–ø–∫–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤ -->
      <div class="filters">
        <button @click="filter = 'all'" :class="{ active: filter === 'all' }">–í—Å–µ</button>
        <button @click="filter = 'active'" :class="{ active: filter === 'active' }">–ê–∫—Ç–∏–≤–Ω—ã–µ</button>
        <button @click="filter = 'completed'" :class="{ active: filter === 'completed' }">
          –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ
        </button>
      </div>

      <!-- –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–º—ã -->
      <button @click="isDark = !isDark" class="theme-toggle">
        {{ isDark ? '–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞' : '–¢—ë–º–Ω–∞—è —Ç–µ–º–∞' }}
      </button>

      <!-- –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á -->
      <ul class="task-list">
        <li v-for="task in filteredTasks" :key="task.id" class="task-item">
          <span :class="{ completed: task.completed }"><strong>{{ task.title }}</strong></span>
          <p v-if="task.text" class="task-description">{{ task.text }}</p>

          <!-- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ –∏ —Å—Ç–∞—Ç—É—Å–∞ -->
          <div class="task-meta">
            <span :class="['priority-badge', 'priority-' + task.priority]">
              {{ getPriorityLabel(task.priority) }}
            </span>
            <span :class="['status-badge', 'status-' + task.status]">
              {{ getStatusLabel(task.status) }}
            </span>
          </div>

          <div class="task-actions">
            <input type="checkbox" v-model="task.completed" :id="'completed-' + task.id" />
            <label :for="'completed-' + task.id" class="action-label">–°–¥–µ–ª–∞–Ω–æ</label>
            <!-- –ö–Ω–æ–ø–∫–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
            <button @click="openEditModal(task)" class="edit-btn">‚úèÔ∏è</button>
            <button @click="removeTask(task.id)" class="delete-btn">√ó</button>
          </div>
        </li>
      </ul>

      <!-- –°–æ–æ–±—â–µ–Ω–∏–µ, –µ—Å–ª–∏ –∑–∞–¥–∞—á –Ω–µ—Ç -->
      <p v-if="tasks.length === 0" class="empty">–ù–µ—Ç –∑–∞–¥–∞—á. –î–æ–±–∞–≤—å –ø–µ—Ä–≤—É—é!</p>

      <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∑–∞–¥–∞—á–∏ -->
      <transition name="modal">
        <div v-if="isEditModalOpen" class="modal-overlay" @click="closeEditModal">
          <div class="modal-content large-modal" @click.stop>
            <h3>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–∞—á—É</h3>

            <!-- –ù–û–í–û–ï: –ü–æ–ª–µ –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–∞ -->
            <label for="editTaskTitle">–ó–∞–≥–æ–ª–æ–≤–æ–∫ –∑–∞–¥–∞—á–∏:</label>
            <input
              id="editTaskTitle"
              v-model="editedTaskTitle"
              type="text"
              class="modal-input"
              placeholder="–ö—Ä–∞—Ç–∫–æ –æ —á—ë–º –∑–∞–¥–∞—á–∞"
            />

            <!-- –ü–æ–ª–µ –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è -->
            <label for="editTaskText">–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏:</label>
            <textarea
              id="editTaskText"
              v-model="editedTaskText"
              class="modal-textarea"
              placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏..."
            ></textarea>

            <!-- –ü–æ–ª—è –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ –∏ —Å—Ç–∞—Ç—É—Å–∞ -->
            <label for="editTaskPriority">–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:</label>
            <select id="editTaskPriority" v-model="editedTaskPriority" class="modal-select">
              <option value="low">–ù–∏–∑–∫–∏–π</option>
              <option value="medium">–°—Ä–µ–¥–Ω–∏–π</option>
              <option value="high">–í—ã—Å–æ–∫–∏–π</option>
            </select>

            <label for="editTaskStatus">–°—Ç–∞—Ç—É—Å:</label>
            <select id="editTaskStatus" v-model="editedTaskStatus" class="modal-select">
              <option value="planned">–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞</option>
              <option value="in-progress">–í –ø—Ä–æ—Ü–µ—Å—Å–µ</option>
              <option value="done">–í—ã–ø–æ–ª–Ω–µ–Ω–∞</option>
            </select>

            <div class="modal-actions">
              <button @click="saveEditedTask">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
              <button @click="closeEditModal">–û—Ç–º–µ–Ω–∞</button>
            </div>
          </div>
        </div>
      </transition>

      <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏ -->
      <transition name="modal">
        <div v-if="isNewTaskModalOpen" class="modal-overlay" @click="closeNewTaskModal">
          <div class="modal-content large-modal" @click.stop>
            <h3>–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É</h3>

            <!-- –ù–û–í–û–ï: –ü–æ–ª–µ –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–∞ -->
            <label for="newTaskTitle">–ó–∞–≥–æ–ª–æ–≤–æ–∫ –∑–∞–¥–∞—á–∏:</label>
            <input
              id="newTaskTitle"
              v-model="newTaskData.title"
              type="text"
              class="modal-input"
              placeholder="–ö—Ä–∞—Ç–∫–æ –æ —á—ë–º –∑–∞–¥–∞—á–∞"
            />

            <!-- –ü–æ–ª–µ –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è -->
            <label for="newTaskText">–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏:</label>
            <textarea
              id="newTaskText"
              v-model="newTaskData.text"
              class="modal-textarea"
              placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏..."
            ></textarea>

            <label for="newTaskPriority">–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:</label>
            <select id="newTaskPriority" v-model="newTaskData.priority" class="modal-select">
              <option value="low">–ù–∏–∑–∫–∏–π</option>
              <option value="medium">–°—Ä–µ–¥–Ω–∏–π</option>
              <option value="high">–í—ã—Å–æ–∫–∏–π</option>
            </select>

            <label for="newTaskStatus">–°—Ç–∞—Ç—É—Å:</label>
            <select id="newTaskStatus" v-model="newTaskData.status" class="modal-select">
              <option value="planned">–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞</option>
              <option value="in-progress">–í –ø—Ä–æ—Ü–µ—Å—Å–µ</option>
              <option value="done">–í—ã–ø–æ–ª–Ω–µ–Ω–∞</option>
            </select>

            <div class="modal-actions">
              <button @click="saveNewTask">–°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É</button>
              <button @click="closeNewTaskModal">–û—Ç–º–µ–Ω–∞</button>
            </div>
          </div>
        </div>
      </transition>
    </div>
    <!-- –ö–æ–Ω–µ—Ü #app -->

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º Vue –∏ –Ω–∞—à —Å–∫—Ä–∏–ø—Ç -->
    <script src="https://unpkg.com/vue@3"></script>
    <script src="script.js"></script>
  </body>
</html>