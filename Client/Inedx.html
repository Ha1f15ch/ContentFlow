<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Мои задачи</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Корневой элемент Vue -->
  <div id="app">
    <h1>Мои задачи</h1>

    <!-- Форма добавления задачи -->
    <form @submit.prevent="addTask">
      <input v-model="newTask" type="text" placeholder="Что нужно сделать?" />
      <button type="submit">Добавить</button>
    </form>

    <!-- Кнопки фильтров -->
    <div class="filters">
      <button @click="filter = 'all'" :class="{ active: filter === 'all' }">Все</button>
      <button @click="filter = 'active'" :class="{ active: filter === 'active' }">Активные</button>
      <button @click="filter = 'completed'" :class="{ active: filter === 'completed' }">Выполненные</button>
    </div>

    <!-- Кнопка переключения темы -->
    <button @click="isDark = !isDark" class="theme-toggle">
      {{ isDark ? 'Светлая тема' : 'Тёмная тема' }}
    </button>

    <!-- Список задач -->
    <ul class="task-list">
      <li v-for="task in filteredTasks" :key="task.id" class="task-item">
        <span :class="{ completed: task.completed }">{{ task.text }}</span>
        <div class="task-actions">
            <input type="checkbox" v-model="task.completed" :id="'completed-' + task.id" />
            <label :for="'completed-' + task.id" class="action-label">Сделано</label>
            <!-- Кнопка редактирования -->
            <button @click="openEditModal(task)" class="edit-btn">✏️</button>
            <button @click="removeTask(task.id)" class="delete-btn">×</button>
        </div>
      </li>
    </ul>
    <!-- Модальное окно редактирования -->
        <div v-if="isEditModalOpen" class="modal-overlay" @click="closeEditModal">
             <div class="modal-content" @click.stop>
              <h3>Редактировать задачу</h3>
               <input v-model="editedTaskText" type="text" class="modal-input" />
        <div class="modal-actions">
              <button @click="saveEditedTask">Сохранить</button>
              <button @click="closeEditModal">Отмена</button>
        </div>
        </div>
        </div>
    <!-- Сообщение, если задач нет  -->
    <p v-if="tasks.length === 0" class="empty">Нет задач. Добавь первую!</p>
  </div>

  <!-- Подключаем Vue и наш скрипт -->
  <script src="https://unpkg.com/vue@3"></script>
  <script src="script.js"></script>
</body>
</html>